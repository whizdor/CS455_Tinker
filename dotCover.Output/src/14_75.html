<!DOCTYPE html>
<html>
  <head>
    <meta http-equiv="content-type" content="text/html; charset=utf-8" />
    <title>/Users/kushagra/Desktop/CS455_Stuff/CS455_Tinker/tests/StackNServe.Tests/Pages.Tests/Home.Tests.cs</title>
    <script type="text/javascript" src="../js/dotcover.sourceview.js"></script>
    <link rel="stylesheet" type="text/css" href="../css/dotcover.report.css" />
  </head>
  <body>
    <pre id="content" class="source-code">
using Bunit;
using Xunit;
using StackNServe.Pages;
using StackNServe.Services;
using StackNServe.Models;
using System.Security.Cryptography;
using StackNServe.Shared;
using Microsoft.Extensions.DependencyInjection;
using Microsoft.JSInterop;
using Moq;

namespace StackNServe.Tests
{
    public class HomeTests : TestContext
    {
        private Mock&lt;GlobalStringListService&gt; _mockStringListService;
        private Mock&lt;IJSRuntime&gt; _mockJSRuntime;
        private Mock&lt;SelectionButtonService&gt; _mockSelectionButtonService;

        public HomeTests()
        {
            _mockStringListService = new Mock&lt;GlobalStringListService&gt;();
            _mockJSRuntime = new Mock&lt;IJSRuntime&gt;();

            Services.AddSingleton(_mockStringListService.Object);
            Services.AddSingleton(_mockJSRuntime.Object);
            Services.AddSingleton&lt;SelectionButtonService&gt;();
        }

        [Fact]
        public void InitialRender_ShouldShowGameElements()
        {
            // Arrange
            var cut = RenderComponent&lt;Home&gt;();

            // Act &amp; Assert
            cut.FindComponent&lt;Bun_Select&gt;();
            cut.FindComponent&lt;Patty_Select&gt;();
            cut.FindComponent&lt;Toppings_Select&gt;();
            cut.FindComponent&lt;Sauces_Select&gt;();
            cut.FindComponent&lt;Main_Page_Header&gt;();
            cut.FindComponent&lt;CountdownTimer&gt;();
            cut.FindComponent&lt;Cooking_Table&gt;();
            cut.FindComponent&lt;Order&gt;();
            cut.FindComponent&lt;Skip&gt;();
            cut.FindComponent&lt;Submit&gt;();
            cut.FindComponent&lt;Score_Board&gt;();
        }
        [Fact]
        public async Task PlayerSkip_ShouldDecrease10FromBalance()
        {
            // Arrange
            var cut = RenderComponent&lt;Home&gt;();

            // Act
            await cut.InvokeAsync(() =&gt; cut.Instance.Player_Skip());

            // Assert
            Assert.Equal(90, cut.Instance.New_Player.Balance);
        }

        [Fact]
        public async Task HandleTimerFinished_ShouldChangeIsEndedToTrue()
        {
            // Arrange
            var cut = RenderComponent&lt;Home&gt;();

            // Act
            await cut.InvokeAsync(() =&gt; cut.Instance.HandleTimerFinished());

            // Assert
            Assert.True(cut.Instance.isEnded);
        }

        [Fact]
        public async Task FetchOrderList_ShouldReturnListOfOrders()
        {
            // Arrange
            var cut = RenderComponent&lt;Home&gt;();

            // Act
            var result = cut.Instance.Fetch_Order_List();

            // Assert
            Assert.IsType&lt;List&lt;string&gt;&gt;(result);
        }

        [Fact]
        public async Task FetchOrderPrice_ShouldReturnPriceBetween5And200()
        {
            // Arrange
            var cut = RenderComponent&lt;Home&gt;();

            // Act
            var result = cut.Instance.Fetch_Order_Price();

            // Assert
            Assert.InRange(result, 5, 200);
        }

        [Fact]
        public async Task ReloadGame_ShouldResetGame()
        {
            // Arrange
            var cut = RenderComponent&lt;Home&gt;();
            cut.Instance.isEnded = true;
            cut.Instance.New_Player.Balance = 50;

            // Act
            await cut.InvokeAsync(() =&gt; cut.Instance.ReloadGame());

            // Assert
            Assert.False(cut.Instance.isEnded);
            Assert.Equal(100, cut.Instance.New_Player.Balance);
        }

        [Fact]
        public async Task UpdateOrder_ShouldUpdateOrder()
        {
            // Arrange
            var cut = RenderComponent&lt;Home&gt;();

            // Act
            cut.InvokeAsync(() =&gt; cut.Instance.UpdateOrder());

            // Assert
            Assert.IsType&lt;List&lt;string&gt;&gt;(cut.Instance.currentOrderList);
            Assert.InRange(cut.Instance.currentOrderPrice, 5, 200);
        }
        [Fact]
        public void PlayerSkip_CheckFunctionsCalled() 
        {
            var mockStringListService = new Mock&lt;GlobalStringListService&gt;();
            mockStringListService.Setup(s =&gt; s.ClearList()).Verifiable();

            // Setup
            Services.AddSingleton(mockStringListService.Object);

            // Arrange
            var cut = RenderComponent&lt;Home&gt;();

            // Act
            cut.InvokeAsync(() =&gt; cut.Instance.Player_Skip());

            // Assert
            Assert.Equal(90, cut.Instance.New_Player.Balance);
            mockStringListService.Verify(s =&gt; s.ClearList(), Times.Once);
        }
    }
}
    </pre>
    <script type="text/javascript">
      highlightRanges([[20,9,20,27,1],[21,9,21,10,1],[22,13,22,74,1],[23,13,23,53,1],[25,13,25,66,1],[26,13,26,58,1],[27,13,27,61,1],[28,9,28,10,1],[32,9,32,10,1],[34,13,34,47,1],[37,13,37,45,1],[38,13,38,47,1],[39,13,39,50,1],[40,13,40,48,1],[41,13,41,51,1],[42,13,42,49,1],[43,13,43,48,1],[44,13,44,40,1],[45,13,45,39,1],[46,13,46,41,1],[47,13,47,46,1],[48,9,48,10,1],[51,9,51,10,1],[53,13,53,47,1],[56,13,56,41,1],[56,41,56,67,1],[56,67,56,69,1],[59,13,59,63,1],[60,9,60,10,1],[64,9,64,10,1],[66,13,66,47,1],[69,13,69,41,1],[69,41,69,75,1],[69,75,69,77,1],[72,13,72,47,1],[73,9,73,10,1],[77,9,77,10,1],[79,13,79,47,1],[82,13,82,58,1],[85,13,85,49,1],[86,9,86,10,1],[90,9,90,10,1],[92,13,92,47,1],[95,13,95,59,1],[98,13,98,44,1],[99,9,99,10,1],[103,9,103,10,1],[105,13,105,47,1],[106,13,106,41,1],[107,13,107,50,1],[110,13,110,41,1],[110,41,110,66,1],[110,66,110,68,1],[113,13,113,48,1],[114,13,114,64,1],[115,9,115,10,1],[119,9,119,10,1],[121,13,121,47,1],[124,13,124,35,1],[124,35,124,61,1],[124,61,124,63,1],[127,13,127,72,1],[128,13,128,68,1],[129,9,129,10,1],[132,9,132,10,1],[133,13,133,77,1],[134,13,134,74,1],[137,13,137,65,1],[140,13,140,47,1],[143,13,143,35,1],[143,35,143,61,1],[143,61,143,63,1],[146,13,146,63,1],[147,13,147,74,1],[148,9,148,10,1]]);
    </script>
  </body>
</html>