<!DOCTYPE html>
<html>
  <head>
    <meta http-equiv="content-type" content="text/html; charset=utf-8" />
    <title>/Users/kushagra/Desktop/CS455_Stuff/CS455_Tinker/src/StackNServe/Shared/Bun_Select.razor</title>
    <script type="text/javascript" src="../js/dotcover.sourceview.js"></script>
    <link rel="stylesheet" type="text/css" href="../css/dotcover.report.css" />
  </head>
  <body>
    <pre id="content" class="source-code">
&lt;style&gt;
    @@import url(&#39;https://fonts.googleapis.com/css2?family=Cedarville+Cursive&amp;family=Poppins:ital,wght@0,100;0,200;0,300;0,400;0,500;0,600;0,700;0,800;0,900;1,100;1,200;1,300;1,400;1,500;1,600;1,700;1,800;1,900&amp;display=swap&#39;);
    .BunSelect
    {
        display: flex;
        flex-direction: row;
    }
    .BunToggleButton
    {
        background-color: #FFCBA2;
        width: 120px;
        height: 120px;
        border-radius: 50%;
        border: 1px solid #E38282;
    }

    .BunToggleButton:hover
    {
        background-color: rgb(208, 168, 221);
        transition: 0.5s;
    }

    .Bun_Select_Image 
    {
        padding-left: 10px;
        padding-top: 12px;
        max-width: 100%;
        max-height: 100%;
        object-fit: contain;
    }

    .ClickExpandMenu
    {
        background-color: #fce1cc;
        position: absolute;
        align-items: center;
        margin-left: 10rem;
        margin-top: 1.5rem;
        padding: 5px;
        padding-left: 25px;
        border-radius: 15px;
        list-style-type: none;
        display: flex;
        flex-direction: row;
        animation: 0.5s;
    }

    .ClickExpandMenu li
    {
        margin-right: 10px;
    }

    .ImageSmallCircular
    {
        width: 60px;
        height: 60px;
        border-radius: 50%; 
        object-fit: cover; 
    }
    .HoverInfo 
    {
        z-index: 1000;
        text-align: center;
        font-family:&quot;Cedarville Cursive&quot;, cursive;
        position: absolute;
        background-color: white;
        border: 1px solid #ccc;
        padding: 10px;
        border-radius: 5px;
        box-shadow: 0 2px 5px rgba(0,0,0,0.2);
        top: 70px;
        @* left: 0; *@
        width: 200px;
    }
    .HoverInfoHeading
    {
        color:#E36565;
    }
    .HoverInfoPrice
    {
        color:#E36565;
    }
&lt;/style&gt;

@using StackNServe.Services
@using StackNServe.Models
@inject GlobalStringListService StringListService
@inject SelectionButtonService SelectionButtonService

&lt;div class = &quot;BunSelect&quot;&gt;
    &lt;button @onclick=&quot;ToggleMenu&quot; class = &quot;BunToggleButton&quot;&gt;
        &lt;div class=&quot;BunIconContainer&quot;&gt;
            &lt;img src=&quot;images/Bun_Select.png&quot; alt=&quot;Bun Select&quot; class=&quot;Bun_Select_Image&quot; /&gt;
        &lt;/div&gt;
    &lt;/button&gt;
    @if (isExpanded)
    {
        &lt;ul class = &quot;ClickExpandMenu&quot;&gt;
            @foreach (var item in BunImages.Select((Bun, index) =&gt; new { Bun, index }))
            {
                &lt;li @onmouseenter=&quot;() =&gt; Display_Info(item.Bun)&quot; @onmouseleave=&quot;ClearHoverInfo&quot; @onclick=&quot;() =&gt; AddToBurger(item.Bun)&quot;&gt;
                    &lt;img src=&quot;@item.Bun&quot; class=&quot;ImageSmallCircular&quot; alt=&quot;Bun&quot; /&gt;
                    @if (currentHoverInfo != null &amp;&amp; currentHoverPatty == item.Bun)
                    {
                        &lt;div class=&quot;HoverInfo&quot; style=&quot;margin-left:@($&quot;{item.index * 3.5}vw&quot;)&quot;&gt;
                            &lt;h5 class=&quot;HoverInfoHeading&quot;&gt;@currentHoverInfo.Name&lt;/h5&gt;
                            &lt;p&gt;@currentHoverInfo.Description&lt;/p&gt;
                            &lt;p class=&quot;HoverInfoPrice&quot;&gt;Price: Rs. @currentHoverInfo.Price.ToString(&quot;F2&quot;)&lt;/p&gt;
                        &lt;/div&gt;
                    }
                &lt;/li&gt;
            }
            &lt;li&gt;&lt;/li&gt;
        &lt;/ul&gt;
        
    }
&lt;/div&gt;


@code
{  
    List&lt;string&gt; BunImages = new List&lt;string&gt;
        {
            &quot;images/Bun/Garlic_Bun.png&quot;,
            &quot;images/Bun/Parmesan_Bun.png&quot;,
            &quot;images/Bun/Plain_Bun.png&quot;,
            &quot;images/Bun/Sesame_Bun.png&quot;,
        };

    private bool isExpanded = false;
    private BunInfo currentHoverInfo;
    private string currentHoverPatty;
    private void Display_Info(string Bun)
    {
        currentHoverPatty = Bun;
        if (Bun == &quot;images/Bun/Garlic_Bun.png&quot;)
        {
            Garlic_Bun temp_object = new Garlic_Bun();
            currentHoverInfo = new BunInfo(&quot;Garlic Bun&quot;, temp_object.Description, temp_object.Price);
        }
        else if (Bun == &quot;images/Bun/Parmesan_Bun.png&quot;)
        {
            Parmesan_Bun temp_object = new Parmesan_Bun();
            currentHoverInfo = new BunInfo(&quot;Parmesan Bun&quot;, temp_object.Description, temp_object.Price);
        }
        else if (Bun == &quot;images/Bun/Plain_Bun.png&quot;)
        {
            Plain_Bun temp_object = new Plain_Bun();
            currentHoverInfo = new BunInfo(&quot;Plain Bun&quot;, temp_object.Description, temp_object.Price);
        }
        else if (Bun == &quot;images/Bun/Sesame_Bun.png&quot;)
        {
            Sesame_Bun temp_object = new Sesame_Bun();
            currentHoverInfo = new BunInfo(&quot;Sesame Bun&quot;, temp_object.Description, temp_object.Price);
        }
    }
    private void ClearHoverInfo()
    {
        currentHoverInfo = null;
        currentHoverPatty = null;
    }
    [Parameter]
    public EventCallback&lt;bool&gt; OnStateChanged { get; set; }
        
    private async Task ToggleMenu()
    {
        if(isExpanded) {
            isExpanded = false;
        }
        else {
            isExpanded = true;
            SelectionButtonService.BunSelectVar = true;
            SelectionButtonService.PattySelectVar = false;
            SelectionButtonService.SaucesSelectVar = false;
            SelectionButtonService.ToppingSelectVar = false;
            SelectionButtonService.NotifyStateChanged();
        }
        await OnStateChanged.InvokeAsync(isExpanded);
    }
    private class BunInfo
    {
        public string Name { get; set; }
        public string Description { get; set; }
        public decimal Price { get; set; }

        public BunInfo(string name, string description, decimal price)
        {
            Name = name;
            Description = description;
            Price = price;
        }
    }

    private void AddItem(string newItem)
    {
        if (!string.IsNullOrWhiteSpace(newItem))
        {
            StringListService.AddString(newItem);
        }
    }

    public void AddToBurger(string buns)
    {
        Console.WriteLine(&quot;Adding Bun to Burger&quot;);
        // Add Patty to Burger
        currentHoverPatty = buns;

        //If there is no bun in the burger, add the bun to the bottom
        //Travel through the list of ingredients and add the bun to the bottom
        int count = 0;
        foreach (var ingredient in StringListService.StringList)
        {
            if (ingredient == &quot;Bun Bottom&quot;)
            {
                count++;
            }
        }

        if(count == 0)
        {
            if (buns == &quot;images/Bun/Garlic_Bun.png&quot;) AddItem(&quot;Bun Bottom&quot;);
            else if (buns == &quot;images/Bun/Parmesan_Bun.png&quot;) AddItem(&quot;Bun Bottom&quot;);
            else if (buns == &quot;images/Bun/Plain_Bun.png&quot;) AddItem(&quot;Bun Bottom&quot;);
            else if (buns == &quot;images/Bun/Sesame_Bun.png&quot;) AddItem(&quot;Bun Bottom&quot;);
        }

        else
        {
            if (buns == &quot;images/Bun/Garlic_Bun.png&quot;) AddItem(&quot;Garlic Bun&quot;);
            else if (buns == &quot;images/Bun/Parmesan_Bun.png&quot;) AddItem(&quot;Parmesan Bun&quot;);
            else if (buns == &quot;images/Bun/Plain_Bun.png&quot;) AddItem(&quot;Plain Bun&quot;);
            else if (buns == &quot;images/Bun/Sesame_Bun.png&quot;) AddItem(&quot;Sesame Bun&quot;);
        }
    }

    private System.Threading.Timer _timer;

    protected override void OnInitialized()
    {
        _timer = new System.Threading.Timer(CheckBunSelectVar, null, 0, 100); // Check every 100ms
    }

    private void CheckBunSelectVar(object state)
    {
        if (!SelectionButtonService.BunSelectVar &amp;&amp; isExpanded)
        {
            InvokeAsync(async () =&gt;
            {
                await ToggleMenu();
                StateHasChanged();
            });
        }
    }

    public void Dispose()
    {
        _timer?.Dispose();
    }
}
    </pre>
    <script type="text/javascript">
      highlightRanges([[96,6,96,21,1],[97,5,97,6,0],[99,14,99,21,0],[99,23,99,31,0],[99,32,99,34,0],[99,35,99,68,0],[99,68,99,86,0],[99,86,99,87,0],[100,13,100,14,0],[101,42,101,64,0],[101,113,101,134,0],[103,22,103,84,0],[104,21,104,22,0],[110,21,110,22,0],[112,13,112,14,0],[116,5,116,6,0],[122,5,128,11,1],[130,5,130,37,1],[134,5,134,6,0],[135,9,135,33,0],[136,9,136,48,0],[137,9,137,10,0],[138,13,138,55,0],[139,13,139,102,0],[140,9,140,10,0],[141,14,141,55,0],[142,9,142,10,0],[143,13,143,59,0],[144,13,144,104,0],[145,9,145,10,0],[146,14,146,52,0],[147,9,147,10,0],[148,13,148,53,0],[149,13,149,101,0],[150,9,150,10,0],[151,14,151,53,0],[152,9,152,10,0],[153,13,153,55,0],[154,13,154,102,0],[155,9,155,10,0],[156,5,156,6,0],[158,5,158,6,0],[159,9,159,33,0],[160,9,160,34,0],[161,5,161,6,0],[163,49,163,53,0],[163,54,163,58,0],[166,5,166,6,0],[167,9,167,23,0],[167,24,167,25,0],[168,13,168,32,0],[169,9,169,10,0],[170,14,170,15,0],[171,13,171,31,0],[172,13,172,56,0],[173,13,173,59,0],[174,13,174,60,0],[175,13,175,61,0],[176,13,176,57,0],[177,9,177,10,0],[178,9,178,54,0],[179,5,179,6,0],[182,30,182,34,0],[182,35,182,39,0],[183,37,183,41,0],[183,42,183,46,0],[184,32,184,36,0],[184,37,184,41,0],[186,9,186,71,0],[187,9,187,10,0],[188,13,188,25,0],[189,13,189,39,0],[190,13,190,27,0],[191,9,191,10,0],[195,5,195,6,0],[196,9,196,49,0],[197,9,197,10,0],[198,13,198,50,0],[199,9,199,10,0],[200,5,200,6,0],[203,5,203,6,0],[204,9,204,51,0],[206,9,206,34,0],[210,9,210,23,0],[211,9,211,16,0],[211,18,211,32,0],[211,33,211,35,0],[211,36,211,64,0],[212,9,212,10,0],[213,13,213,44,0],[214,13,214,14,0],[215,17,215,25,0],[216,13,216,14,0],[217,9,217,10,0],[219,9,219,23,0],[220,9,220,10,0],[221,13,221,53,0],[221,54,221,76,0],[222,18,222,60,0],[222,61,222,83,0],[223,18,223,57,0],[223,58,223,80,0],[224,18,224,58,0],[224,59,224,81,0],[225,9,225,10,0],[228,9,228,10,0],[229,13,229,53,0],[229,54,229,76,0],[230,18,230,60,0],[230,61,230,85,0],[231,18,231,57,0],[231,58,231,79,0],[232,18,232,58,0],[232,59,232,81,0],[233,9,233,10,0],[234,5,234,6,0],[239,5,239,6,1],[240,9,240,78,1],[241,5,241,6,1],[244,5,244,6,1],[245,9,245,64,1],[246,9,246,10,0],[247,13,248,13,0],[248,13,248,14,0],[248,14,249,17,0],[249,17,249,36,0],[249,36,250,17,0],[250,17,250,35,0],[250,35,251,13,0],[251,13,251,14,0],[251,14,251,16,0],[252,9,252,10,0],[253,5,253,6,1],[256,5,256,6,0],[257,9,257,27,0],[258,5,258,6,0]]);
    </script>
  </body>
</html>